{
	"name": "Cell Minigame Events",
	"events": [
		{
			"eventType": "comment",
			"text": "Number of enemies to spawn"
		},
		{
			"eventType": "variable",
			"name": "enemyCount",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 901901690857590
		},
		{
			"eventType": "variable",
			"name": "enemiesSpawned",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 861662606814035
		},
		{
			"eventType": "comment",
			"text": "Spawn delay between each enemy spawn"
		},
		{
			"eventType": "variable",
			"name": "spawnDelay",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 941688151790895
		},
		{
			"eventType": "comment",
			"text": "Fire rate settings"
		},
		{
			"eventType": "variable",
			"name": "fireRate",
			"type": "number",
			"initialValue": "2.25",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 738949697270397
		},
		{
			"eventType": "variable",
			"name": "verticalSpawnMin",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 510504776559425
		},
		{
			"eventType": "variable",
			"name": "verticalSpawnMax",
			"type": "number",
			"initialValue": "480",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 754227550923513
		},
		{
			"eventType": "variable",
			"name": "RandomEnemySize",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 266050703097683
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 755151572884109
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "Show and set timer on layout start"
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 909669666373255,
					"parameters": {
						"variable": "currentTime",
						"value": "minigameTimeLength"
					}
				},
				{
					"id": "set-angle",
					"objectClass": "monster",
					"sid": 376324428008829,
					"parameters": {
						"angle": "random(360)"
					}
				},
				{
					"type": "comment",
					"text": "Tighten fat walls based on heart attack chance"
				},
				{
					"id": "set-y",
					"objectClass": "UpperFat",
					"sid": 817025358248717,
					"parameters": {
						"y": "160 * (heartAttackChance / 100)"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 925854051831869,
					"parameters": {
						"variable": "verticalSpawnMin",
						"value": "160 * (HeartAttackChance / 100)"
					}
				},
				{
					"id": "set-y",
					"objectClass": "LowerFat",
					"sid": 408223781737060,
					"parameters": {
						"y": "480 - (160 * (heartAttackChance / 100))"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 636531691144351,
					"parameters": {
						"variable": "verticalSpawnMax",
						"value": "480 - (160 * (HeartAttackChance / 100))"
					}
				}
			],
			"sid": 212152066541909,
			"children": [
				{
					"eventType": "comment",
					"text": "Calculate and set enemy count"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 575364863818353,
							"parameters": {
								"first-value": "cholesterolPenalty",
								"comparison": 3,
								"second-value": "maxRecommendedPenalty"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 325575102339966,
							"parameters": {
								"variable": "enemyCount",
								"value": "cholesterolPenalty / 3"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 445236673970978,
							"parameters": {
								"variable": "spawnDelay",
								"value": "minigameTimeLength / enemyCount"
							}
						}
					],
					"sid": 959837888308341
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 119024873055974
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 958715753639823,
							"parameters": {
								"variable": "enemyCount",
								"value": "cholesterolPenalty / 2"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 739171911769163,
							"parameters": {
								"variable": "spawnDelay",
								"value": "minigameTimeLength / enemyCount"
							}
						}
					],
					"sid": 149873415071655
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-x-seconds",
					"objectClass": "System",
					"sid": 806993940458290,
					"parameters": {
						"interval-seconds": "1.0"
					}
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "Update timer every second"
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 938268967027254,
					"parameters": {
						"variable": "currentTime",
						"value": "currentTime - 1"
					}
				}
			],
			"sid": 331351003709165
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 596134091860574,
					"parameters": {
						"variable": "currentTime",
						"comparison": 3,
						"value": "0"
					}
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "Hide timer and change scenes when it hits 0"
				},
				{
					"id": "go-to-layout",
					"objectClass": "System",
					"sid": 562030096600715,
					"parameters": {
						"layout": "Cycle End"
					}
				}
			],
			"sid": 204007201464706
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-tick",
					"objectClass": "System",
					"sid": 937253821998285
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "Update timer text every tick"
				},
				{
					"id": "set-text",
					"objectClass": "TimerCell",
					"sid": 427174295574846,
					"parameters": {
						"text": "currentTime"
					}
				},
				{
					"type": "comment",
					"text": "Do minigame stuff"
				},
				{
					"id": "set-angle-toward-position",
					"objectClass": "player",
					"sid": 490669154712224,
					"parameters": {
						"x": "Mouse.X",
						"y": "Mouse.Y"
					}
				}
			],
			"sid": 558961683089102
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "mouse-button-is-down",
					"objectClass": "Mouse",
					"sid": 527895603936277,
					"parameters": {
						"mouse-button": "left"
					}
				},
				{
					"id": "every-x-seconds",
					"objectClass": "System",
					"sid": 938637058272657,
					"parameters": {
						"interval-seconds": "1 / fireRate"
					}
				}
			],
			"actions": [
				{
					"id": "spawn-another-object",
					"objectClass": "player",
					"sid": 154596069558113,
					"parameters": {
						"object": "bullet",
						"layer": "0",
						"image-point": "1",
						"create-hierarchy": false
					}
				}
			],
			"sid": 369131599250212
		},
		{
			"eventType": "comment",
			"text": "When enemy dies"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "bullet",
					"sid": 214993154783748,
					"parameters": {
						"object": "monster"
					}
				}
			],
			"actions": [
				{
					"id": "spawn-another-object",
					"objectClass": "bullet",
					"sid": 355116395852529,
					"parameters": {
						"object": "explosion",
						"layer": "0",
						"image-point": "0",
						"create-hierarchy": false
					}
				},
				{
					"id": "destroy",
					"objectClass": "bullet",
					"sid": 630532857558293
				},
				{
					"type": "comment",
					"text": "Decrease cholesterol penalty"
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 975919385732583,
					"parameters": {
						"variable": "cholesterolPenalty",
						"value": "clamp(cholesterolPenalty - 1, 0, Infinity)"
					}
				},
				{
					"type": "comment",
					"text": "Destroy enemy"
				},
				{
					"id": "destroy",
					"objectClass": "monster",
					"sid": 606395235402677
				}
			],
			"sid": 360263313651711
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-outside-layout",
					"objectClass": "monster",
					"sid": 654001738485873
				}
			],
			"actions": [
				{
					"id": "set-angle-toward-position",
					"objectClass": "monster",
					"sid": 704756430575175,
					"parameters": {
						"x": "player.X",
						"y": "player.Y"
					}
				}
			],
			"sid": 103229820782326
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-x-seconds",
					"objectClass": "System",
					"sid": 218953556545646,
					"parameters": {
						"interval-seconds": "spawnDelay * 2"
					}
				},
				{
					"id": "compare-two-values",
					"objectClass": "System",
					"sid": 849474245229012,
					"parameters": {
						"first-value": "enemiesSpawned",
						"comparison": 2,
						"second-value": "enemyCount"
					}
				}
			],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 475295977194196,
					"parameters": {
						"variable": "RandomEnemySize",
						"value": "random(32,80)"
					}
				},
				{
					"id": "create-object",
					"objectClass": "System",
					"sid": 803612866527237,
					"parameters": {
						"object-to-create": "monster",
						"layer": "0",
						"x": "LayoutWidth + 100",
						"y": "random(verticalSpawnMin,verticalSpawnMax)",
						"create-hierarchy": false,
						"template-name": "\"\""
					}
				},
				{
					"id": "set-size",
					"objectClass": "monster",
					"sid": 587959235817294,
					"parameters": {
						"width": "RandomEnemySize",
						"height": "RandomEnemySize"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 861628488155379,
					"parameters": {
						"variable": "enemiesSpawned",
						"value": "enemiesSpawned + 1"
					}
				},
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 364267991154755,
					"parameters": {
						"seconds": "spawnDelay"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 660927072972850,
					"parameters": {
						"variable": "RandomEnemySize",
						"value": "random(32,80)"
					}
				},
				{
					"id": "create-object",
					"objectClass": "System",
					"sid": 481412424034189,
					"parameters": {
						"object-to-create": "monster",
						"layer": "0",
						"x": "-100",
						"y": "random(verticalSpawnMin, verticalSpawnMax)",
						"create-hierarchy": false,
						"template-name": "\"\""
					}
				},
				{
					"id": "set-size",
					"objectClass": "monster",
					"sid": 492095950847269,
					"parameters": {
						"width": "RandomEnemySize",
						"height": "RandomEnemySize"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 894974711388563,
					"parameters": {
						"variable": "enemiesSpawned",
						"value": "enemiesSpawned + 1"
					}
				}
			],
			"sid": 135277561410676
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "monster",
					"sid": 944743796734575,
					"parameters": {
						"object": "player"
					}
				}
			],
			"actions": [
				{
					"id": "destroy",
					"objectClass": "player",
					"sid": 356739896163938
				},
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 687589402516083,
					"parameters": {
						"seconds": "1.0"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 234615786874555,
					"parameters": {
						"variable": "enemiesSpawned",
						"value": "0"
					}
				},
				{
					"id": "go-to-layout",
					"objectClass": "System",
					"sid": 930685221036976,
					"parameters": {
						"layout": "Cycle End"
					}
				}
			],
			"sid": 783798152601157
		}
	],
	"sid": 637787955709703
}